#
# Demo of sending/receiving messages to a STOMP server
#
# Tested with ActiveMQ
#

import stomp
import time



timings = [ ]
sent = "hello world"
c = stomp.StompClient()
start = time.time()
c.connect()
timings.append("connect: %.2f" % (time.time() - start))
start = time.time()
c.send('/queue/campaign', sent)
timings.append("send: %.2f" % (time.time() - start))
start = time.time()
c.disconnect()
timings.append("disconnect: %.2f" % (time.time() - start))


c = stomp.StompClient()
c.connect()
start = time.time()
c.subscribe('/queue/campaign')
timings.append("subscribe: %.2f" % (time.time() - start))
start = time.time()
got = c.receive(1)
timings.append("receive: %.2f" % (time.time() - start))
start = time.time()
c.disconnect()
timings.append("disconnect: %.2f" % (time.time() - start))



Sent message: {{ sent }}
<br />
Go message: {{ got.body }}
<ul>
{% for t in timings %}
    <li>{{ t }}</li>
{% end %}
</ul>